{"version":3,"file":"tablefilter.min.js","sources":["../src/tablefilter.js"],"sourcesContent":["define(['jquery'], function($) {\n    return {\n        init: function() {\n            var featureurl = M.cfg.wwwroot + '/local/inactive_users/delete.php';\n            $('#inactive_users-myInput').on('keyup', function() {\n                var input, filter, table, tr;\n                input = $(this);\n                filter = input.val().toUpperCase();\n                table = $('#myTable');\n                tr = table.find('tr');\n                tr.each(function(index) {\n                    if (index !== 0) {\n                        $(this).hide();\n                        var firstname = $(this).find('td').eq(1).text().toUpperCase();\n                        var lastname = $(this).find('td').eq(2).text().toUpperCase();\n                        var email = $(this).find('td').eq(3).text().toUpperCase();\n\n                        if (firstname.indexOf(filter) > -1 || lastname.indexOf(filter) > -1 || email.indexOf(filter) > -1) {\n                            $(this).show();\n                        }\n                    }\n                });\n            });\n\n            // Toggle Check All functionality\n            $('#checkAll').on('click', function() {\n                var source = this;\n                var checkboxes = $('.user-checkbox');\n                checkboxes.each(function() {\n                    $(this).prop('checked', source.checked);\n                });\n            });\n\n            // Suspend selected users functionality\n            $('#suspendSelected').on('click', function() {\n                var selectedIds = $.map($('.user-checkbox:checked'), function(checkbox) {\n                    return $(checkbox).data('userid');\n                });\n\n                if (selectedIds.length > 0) {\n                    selectedIds.forEach(function(userid) {\n                        var suspendUrl = `${featureurl}?userid=${userid}&action=1`;\n\n                        $.ajax({\n                            url: suspendUrl,\n                            type: 'POST',\n                            success: function() {\n                                location.reload();\n                            },\n                            error: function() {\n                                alert('Failed to suspend some users. Please try again.');\n                            }\n                        });\n                    });\n                } else {\n                    alert('Please select at least one user to suspend.');\n                }\n            });\n\n            // Delete selected users functionality\n            $('#deleteSelected').on('click', function(event) {\n                var selectedIds = $.map($('.user-checkbox:checked'), function(checkbox) {\n                    return $(checkbox).data('userid');\n                });\n\n                if (selectedIds.length === 0) {\n                    alert('Please select at least one user to delete.');\n                    event.stopImmediatePropagation();\n                    return;\n                }\n\n                $('#confirmDeleteSelected').modal('show');\n            });\n\n            // Confirm delete functionality\n            $('#confirmDeleteSelectedButton').on('click', function() {\n                var selectedIds = $.map($('.user-checkbox:checked'), function(checkbox) {\n                    return $(checkbox).data('userid');\n                });\n\n                if (selectedIds.length > 0) {\n                    selectedIds.forEach(function(userid) {\n                        var deleteUrl = `${featureurl}?userid=${userid}&action=2`;\n\n                        $.ajax({\n                            url: deleteUrl,\n                            type: 'POST',\n                            success: function() {\n                                location.reload();\n                            },\n                            error: function(error) {\n                                alert(`Failed to delete user ID ${userid}: ${error}`);\n                            }\n                        });\n                    });\n                    $('#confirmDeleteSelected').modal('hide');\n                }\n            });\n        }\n    };\n});"],"names":["define","$","init","featureurl","M","cfg","wwwroot","on","input","filter","this","val","toUpperCase","find","each","index","hide","firstname","eq","text","lastname","email","indexOf","show","source","prop","checked","selectedIds","map","checkbox","data","length","forEach","userid","suspendUrl","ajax","url","type","success","location","reload","error","alert","event","stopImmediatePropagation","modal","deleteUrl"],"mappings":"AAAAA,0CAAO,CAAC,WAAW,SAASC,SACjB,CACHC,KAAM,eACEC,WAAaC,EAAEC,IAAIC,QAAU,mCACjCL,EAAE,2BAA2BM,GAAG,SAAS,eACjCC,MAAOC,OACXD,MAAQP,EAAES,MACVD,OAASD,MAAMG,MAAMC,cACbX,EAAE,YACCY,KAAK,MACbC,MAAK,SAASC,UACC,IAAVA,MAAa,CACbd,EAAES,MAAMM,WACJC,UAAYhB,EAAES,MAAMG,KAAK,MAAMK,GAAG,GAAGC,OAAOP,cAC5CQ,SAAWnB,EAAES,MAAMG,KAAK,MAAMK,GAAG,GAAGC,OAAOP,cAC3CS,MAAQpB,EAAES,MAAMG,KAAK,MAAMK,GAAG,GAAGC,OAAOP,eAExCK,UAAUK,QAAQb,SAAW,GAAKW,SAASE,QAAQb,SAAW,GAAKY,MAAMC,QAAQb,SAAW,IAC5FR,EAAES,MAAMa,cAOxBtB,EAAE,aAAaM,GAAG,SAAS,eACnBiB,OAASd,KACIT,EAAE,kBACRa,MAAK,WACZb,EAAES,MAAMe,KAAK,UAAWD,OAAOE,eAKvCzB,EAAE,oBAAoBM,GAAG,SAAS,eAC1BoB,YAAc1B,EAAE2B,IAAI3B,EAAE,2BAA2B,SAAS4B,iBACnD5B,EAAE4B,UAAUC,KAAK,aAGxBH,YAAYI,OAAS,EACrBJ,YAAYK,SAAQ,SAASC,YACrBC,qBAAgB/B,8BAAqB8B,oBAEzChC,EAAEkC,KAAK,CACHC,IAAKF,WACLG,KAAM,OACNC,QAAS,WACLC,SAASC,UAEbC,MAAO,WACHC,MAAM,yDAKlBA,MAAM,kDAKdzC,EAAE,mBAAmBM,GAAG,SAAS,SAASoC,UAKX,IAJT1C,EAAE2B,IAAI3B,EAAE,2BAA2B,SAAS4B,iBACnD5B,EAAE4B,UAAUC,KAAK,aAGZC,cACZW,MAAM,mDACNC,MAAMC,2BAIV3C,EAAE,0BAA0B4C,MAAM,WAItC5C,EAAE,gCAAgCM,GAAG,SAAS,eACtCoB,YAAc1B,EAAE2B,IAAI3B,EAAE,2BAA2B,SAAS4B,iBACnD5B,EAAE4B,UAAUC,KAAK,aAGxBH,YAAYI,OAAS,IACrBJ,YAAYK,SAAQ,SAASC,YACrBa,oBAAe3C,8BAAqB8B,oBAExChC,EAAEkC,KAAK,CACHC,IAAKU,UACLT,KAAM,OACNC,QAAS,WACLC,SAASC,UAEbC,MAAO,SAASA,OACZC,yCAAkCT,oBAAWQ,cAIzDxC,EAAE,0BAA0B4C,MAAM"}