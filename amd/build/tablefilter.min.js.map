{"version":3,"file":"tablefilter.min.js","sources":["../src/tablefilter.js"],"sourcesContent":["define(['jquery'], function($) {\n    return {\n        init: function() {\n            var featureurl = M.cfg.wwwroot + '/local/inactive_users/delete.php';\n            var resumeurl = M.cfg.wwwroot + '/local/inactive_users/resume_user.php';\n            $('#inactive_users-myInput').on('keyup', function() {\n                var input, filter, table, tr;\n                input = $(this);\n                filter = input.val().toUpperCase();\n                table = $('#myTable');\n                tr = table.find('tr');\n                tr.each(function(index) {\n                    if (index !== 0) {\n                        $(this).hide();\n                        var firstname = $(this).find('td').eq(1).text().toUpperCase();\n                        var lastname = $(this).find('td').eq(2).text().toUpperCase();\n                        var email = $(this).find('td').eq(3).text().toUpperCase();\n                        var lastlogin = $(this).find('td').eq(4).text().toUpperCase();\n\n                        // eslint-disable-next-line max-len\n                        if (firstname.indexOf(filter) > -1 || lastname.indexOf(filter) > -1 || email.indexOf(filter) > -1 || lastlogin.indexOf(filter) > -1) {\n                            $(this).show();\n                        }\n                    }\n                });\n            });\n\n            // Toggle Check All functionality\n            $('#checkAll').on('click', function() {\n                var source = this;\n                var checkboxes = $('.user-checkbox');\n                checkboxes.each(function() {\n                    $(this).prop('checked', source.checked);\n                });\n            });\n\n            // Suspend selected users functionality\n            $('#suspendSelected').on('click', function() {\n                var selectedIds = $.map($('.user-checkbox:checked'), function(checkbox) {\n                    return $(checkbox).data('userid');\n                });\n\n                if (selectedIds.length > 0) {\n                    var suspendrequest = 0;\n                    selectedIds.forEach(function(userid) {\n                        var suspendUrl = `${featureurl}?userid=${userid}&action=1`;\n\n                        $.ajax({\n                            url: suspendUrl,\n                            type: 'POST',\n                            success: function() {\n                                suspendrequest++;\n                                if (suspendrequest === selectedIds.length) {\n                                    location.reload();\n                                }\n                            },\n                            error: function() {\n                                alert('Failed to suspend some users. Please try again.');\n                            }\n                        });\n                    });\n                } else {\n                    alert('Please select at least one user to suspend.');\n                }\n            });\n\n            // Resume selected users functionality\n            $('#resumeSelected').on('click', function() {\n                var selectedIds = $.map($('.user-checkbox:checked'), function(checkbox) {\n                    return $(checkbox).data('userid');\n                });\n\n                if (selectedIds.length > 0) {\n                    var resumerequest = 0;\n                    selectedIds.forEach(function(userid) {\n                        var resumeUrl = `${resumeurl}?userid=${userid}`;\n\n                        $.ajax({\n                            url: resumeUrl,\n                            type: 'POST',\n                            success: function() {\n                                resumerequest++;\n                                if (resumerequest === selectedIds.length) {\n                                    location.reload();\n                                }\n                            },\n                            error: function() {\n                                alert('Failed to resume some users. Please try again.');\n                            }\n                        });\n                    });\n                } else {\n                    alert('Please select at least one user to resume.');\n                }\n            });\n\n            // Delete selected users functionality\n            $('#deleteSelected').on('click', function(event) {\n                var selectedIds = $.map($('.user-checkbox:checked'), function(checkbox) {\n                    return $(checkbox).data('userid');\n                });\n\n                if (selectedIds.length === 0) {\n                    alert('Please select at least one user to delete.');\n                    event.stopImmediatePropagation();\n                    return;\n                }\n\n                $('#confirmDeleteSelected').modal('show');\n            });\n\n            // Confirm delete functionality\n            $('#confirmDeleteSelectedButton').on('click', function() {\n                var selectedIds = $.map($('.user-checkbox:checked'), function(checkbox) {\n                    return $(checkbox).data('userid');\n                });\n\n                if (selectedIds.length > 0) {\n                    selectedIds.forEach(function(userid) {\n                        var deleteUrl = `${featureurl}?userid=${userid}&action=2`;\n\n                        $.ajax({\n                            url: deleteUrl,\n                            type: 'POST',\n                            success: function() {\n                                location.reload();\n                            },\n                            error: function(error) {\n                                alert(`Failed to delete user ID ${userid}: ${error}`);\n                            }\n                        });\n                    });\n                    $('#confirmDeleteSelected').modal('hide');\n                }\n            });\n        }\n    };\n});"],"names":["define","$","init","featureurl","M","cfg","wwwroot","resumeurl","on","input","filter","this","val","toUpperCase","find","each","index","hide","firstname","eq","text","lastname","email","lastlogin","indexOf","show","source","prop","checked","selectedIds","map","checkbox","data","length","suspendrequest","forEach","userid","suspendUrl","ajax","url","type","success","location","reload","error","alert","resumerequest","resumeUrl","event","stopImmediatePropagation","modal","deleteUrl"],"mappings":"AAAAA,0CAAO,CAAC,WAAW,SAASC,SACjB,CACHC,KAAM,eACEC,WAAaC,EAAEC,IAAIC,QAAU,mCAC7BC,UAAYH,EAAEC,IAAIC,QAAU,wCAChCL,EAAE,2BAA2BO,GAAG,SAAS,eACjCC,MAAOC,OACXD,MAAQR,EAAEU,MACVD,OAASD,MAAMG,MAAMC,cACbZ,EAAE,YACCa,KAAK,MACbC,MAAK,SAASC,UACC,IAAVA,MAAa,CACbf,EAAEU,MAAMM,WACJC,UAAYjB,EAAEU,MAAMG,KAAK,MAAMK,GAAG,GAAGC,OAAOP,cAC5CQ,SAAWpB,EAAEU,MAAMG,KAAK,MAAMK,GAAG,GAAGC,OAAOP,cAC3CS,MAAQrB,EAAEU,MAAMG,KAAK,MAAMK,GAAG,GAAGC,OAAOP,cACxCU,UAAYtB,EAAEU,MAAMG,KAAK,MAAMK,GAAG,GAAGC,OAAOP,eAG5CK,UAAUM,QAAQd,SAAW,GAAKW,SAASG,QAAQd,SAAW,GAAKY,MAAME,QAAQd,SAAW,GAAKa,UAAUC,QAAQd,SAAW,IAC9HT,EAAEU,MAAMc,cAOxBxB,EAAE,aAAaO,GAAG,SAAS,eACnBkB,OAASf,KACIV,EAAE,kBACRc,MAAK,WACZd,EAAEU,MAAMgB,KAAK,UAAWD,OAAOE,eAKvC3B,EAAE,oBAAoBO,GAAG,SAAS,eAC1BqB,YAAc5B,EAAE6B,IAAI7B,EAAE,2BAA2B,SAAS8B,iBACnD9B,EAAE8B,UAAUC,KAAK,gBAGxBH,YAAYI,OAAS,EAAG,KACpBC,eAAiB,EACrBL,YAAYM,SAAQ,SAASC,YACrBC,qBAAgBlC,8BAAqBiC,oBAEzCnC,EAAEqC,KAAK,CACHC,IAAKF,WACLG,KAAM,OACNC,QAAS,aACLP,iBACuBL,YAAYI,QAC/BS,SAASC,UAGjBC,MAAO,WACHC,MAAM,8DAKlBA,MAAM,kDAKd5C,EAAE,mBAAmBO,GAAG,SAAS,eACzBqB,YAAc5B,EAAE6B,IAAI7B,EAAE,2BAA2B,SAAS8B,iBACnD9B,EAAE8B,UAAUC,KAAK,gBAGxBH,YAAYI,OAAS,EAAG,KACpBa,cAAgB,EACpBjB,YAAYM,SAAQ,SAASC,YACrBW,oBAAexC,6BAAoB6B,QAEvCnC,EAAEqC,KAAK,CACHC,IAAKQ,UACLP,KAAM,OACNC,QAAS,aACLK,gBACsBjB,YAAYI,QAC9BS,SAASC,UAGjBC,MAAO,WACHC,MAAM,6DAKlBA,MAAM,iDAKd5C,EAAE,mBAAmBO,GAAG,SAAS,SAASwC,UAKX,IAJT/C,EAAE6B,IAAI7B,EAAE,2BAA2B,SAAS8B,iBACnD9B,EAAE8B,UAAUC,KAAK,aAGZC,cACZY,MAAM,mDACNG,MAAMC,2BAIVhD,EAAE,0BAA0BiD,MAAM,WAItCjD,EAAE,gCAAgCO,GAAG,SAAS,eACtCqB,YAAc5B,EAAE6B,IAAI7B,EAAE,2BAA2B,SAAS8B,iBACnD9B,EAAE8B,UAAUC,KAAK,aAGxBH,YAAYI,OAAS,IACrBJ,YAAYM,SAAQ,SAASC,YACrBe,oBAAehD,8BAAqBiC,oBAExCnC,EAAEqC,KAAK,CACHC,IAAKY,UACLX,KAAM,OACNC,QAAS,WACLC,SAASC,UAEbC,MAAO,SAASA,OACZC,yCAAkCT,oBAAWQ,cAIzD3C,EAAE,0BAA0BiD,MAAM"}